---
query:
  model: true
  sql: |
    select
        decidim_blogs_posts.id,
        title->>'fr' as title,
        regexp_replace(body->>'fr', E'<[^>]+>', '', 'gi') as body,
        decidim_component_id,
        decidim_blogs_posts.created_at,
        decidim_blogs_posts.updated_at,
        decidim_author_id
    from decidim_blogs_posts
        join {{#components}} decidim_components on decidim_components.id = decidim_component_id
  info:
    meta:
      depends_on:
        - components
      components: id
