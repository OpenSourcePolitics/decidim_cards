---
query:
  model: true
  sql: |
    select decidim_users.*,
        (case when confirmed_at is null then false else true end) as "confirmed"
    from decidim_users
        join {{#organizations}} as decidim_organizations on decidim_organizations.id = decidim_users.decidim_organization_id
    where deleted_at is null
        and type like 'Decidim::User'
  info:
    meta:
      organizations: id
    filterables:
      date:
        attr: created_at
        required: false
      integer:
        attr: decidim_organization_id
        required: true
    viz_settings:
      scalar:
        - total
      line:
        - day
        - week
        - month
